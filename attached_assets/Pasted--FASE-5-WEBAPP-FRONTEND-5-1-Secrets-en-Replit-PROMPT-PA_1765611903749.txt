## ⚛️ FASE 5: WEBAPP (FRONTEND)

### 5.1 Secrets en Replit

**PROMPT PARA TI (Replit tcf-webapp):**
```
Tools → Secrets:

VITE_API_BASE_URL = https://[TU-API-REPLIT].repl.co
VITE_CHEF_BASE_URL = https://[TU-SKINCHEF-REPLIT].repl.co
VITE_APP_NAME = TheCookFlow
```

### 5.2 Construir WebApp Completa

**PROMPT (Replit Agent en tcf-webapp):**
```
Eres Replit Agent. Proyecto: tcf-webapp. Stack: Vite + React + TypeScript.

OBJETIVO: App completa con onboarding + generación menú + dashboard.

1) CONFIGURACIÓN:
- .replit: npm run dev
- Deps: react-router-dom, zustand, axios
- Copiar tokens desde tcf-brand-master/tokens/*

2) ESTRUCTURA DE RUTAS:
/login          → Register + Login (guarda JWT en localStorage)
/onboarding     → 8 pasos (ver punto 3)
/loading        → Genera menú (ver punto 4)
/dashboard      → Muestra menú + lista compra
/menu/edit      → Swap recetas
/profile        → Editar preferencias
/history        → Menús anteriores
/premium        → Paywall

3) ONBOARDING (8 pasos):
Paso 1: ¿Cuál es tu presupuesto semanal? (número €)
Paso 2: ¿Cuántos coméis en casa? (número personas)
Paso 3: ¿Cuántas comidas al día? (select: 1,2,3)
Paso 4: ¿Cuántos días quieres planificar? (3, 5, 7)
Paso 5: ¿Alergias/intolerancias? (multiselect + input)
Paso 6: ¿Tipo de dieta? (omnívora, vegetariana, vegana, etc.)
Paso 7: ¿Alimentos que no te gustan? (chips removibles)
Paso 8: ¿Qué tienes en la despensa? (textarea opcional)

Al terminar → PUT /api/profile con todos los datos

4) FLUJO GENERACIÓN:
- En /loading:
  1. Llama POST VITE_CHEF_BASE_URL/menu/generate con profile
  2. Si OK → POST VITE_API_BASE_URL/api/menus con menu_json
  3. POST VITE_API_BASE_URL/api/shopping con shopping_list
  4. Navega a /dashboard

5) DASHBOARD:
- GET /api/menus/latest → mostrar menú por días
- GET /api/shopping/latest → mostrar lista agrupada
- Botones: "Cambiar receta", "Regenerar menú"

6) PREMIUM GATING:
- Al cargar app: GET /api/subscription-status
- Hook: useSubscription()
- Si status !== 'active' && !== 'trial':
  * Bloquear swap ilimitado → mostrar /premium
  * Bloquear export → mostrar /premium

7) ESTÉTICA CHALKBOARD:
- Fondo: bg-chalkboard.webp
- Fuente: tokens typography primary
- Botones con efecto tiza (borde irregular)
- Cards con sombra suave
- Colores desde tokens.json

8) ASSETS:
Copiar desde tcf-brand-master/exports/web/:
- public/brand/logo.svg
- public/brand/bg-chalkboard.webp
- public/brand/icons/*.svg
- public/pwa/*.png
- public/og/og-1200x630.png

9) README:
- Cómo configurar Secrets
- Flujo de desarrollo

FINAL:
- Prueba flujo: login → onboarding → loading → dashboard
- Checkpoint + Commit: "feat: webapp v0.1.0 complete"
```

### 5.3 Validación WebApp

**CHECKLIST:**
```
✅ /login funciona (register + login)
✅ /onboarding guarda profile (PUT /api/profile)
✅ /loading genera menú (llama SkinChef + guarda en API)
✅ /dashboard muestra menú y lista
✅ Estética chalkboard aplicada
✅ Paywall premium se muestra correctamente
```